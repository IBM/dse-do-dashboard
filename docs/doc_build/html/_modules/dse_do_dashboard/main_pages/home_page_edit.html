

<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dse_do_dashboard.main_pages.home_page_edit &#8212; DSE DO Dashboard 0.1.2.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/bizstyle.css" />
    
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">DSE DO Dashboard 0.1.2.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">dse_do_dashboard.main_pages.home_page_edit</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for dse_do_dashboard.main_pages.home_page_edit</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright IBM All Rights Reserved.</span>
<span class="c1"># SPDX-License-Identifier: Apache-2.0</span>
<span class="kn">import</span> <span class="nn">ast</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pathlib</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">zipfile</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">import</span> <span class="nn">flask</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">dash.exceptions</span> <span class="kn">import</span> <span class="n">PreventUpdate</span>
<span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dse_do_utils</span> <span class="kn">import</span> <span class="n">ScenarioManager</span>

<span class="kn">from</span> <span class="nn">dse_do_dashboard.main_pages.main_page</span> <span class="kn">import</span> <span class="n">MainPage</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">State</span><span class="p">,</span> <span class="n">ALL</span><span class="p">,</span> <span class="n">MATCH</span>
<span class="kn">import</span> <span class="nn">dash_daq</span> <span class="k">as</span> <span class="nn">daq</span>
<span class="kn">import</span> <span class="nn">dash_bootstrap_components</span> <span class="k">as</span> <span class="nn">dbc</span>


<div class="viewcode-block" id="HomePageEdit"><a class="viewcode-back" href="../../../dse_do_dashboard.main_pages.html#dse_do_dashboard.main_pages.home_page_edit.HomePageEdit">[docs]</a><span class="k">class</span> <span class="nc">HomePageEdit</span><span class="p">(</span><span class="n">MainPage</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Includes:</span>
<span class="sd">    - Duplicate Scenario</span>
<span class="sd">    - Rename Scenario</span>
<span class="sd">    - Delete Scenario</span>
<span class="sd">    - Download Scenario(s)</span>
<span class="sd">    - Upload Scenario(s)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dash_app</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">dash_app</span><span class="p">,</span>
                         <span class="n">page_name</span><span class="o">=</span><span class="s1">&#39;Home&#39;</span><span class="p">,</span>
                         <span class="n">page_id</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">,</span>
                         <span class="n">url</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                         <span class="p">)</span>

<div class="viewcode-block" id="HomePageEdit.get_layout"><a class="viewcode-back" href="../../../dse_do_dashboard.main_pages.html#dse_do_dashboard.main_pages.home_page_edit.HomePageEdit.get_layout">[docs]</a>    <span class="k">def</span> <span class="nf">get_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">reference_scenario_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">multi_scenario_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">scenarios_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">read_scenarios_table_from_db_cached</span><span class="p">()</span>  <span class="c1">#.reset_index()  # SCDB2.get_scenarios_df().reset_index()</span>

        <span class="c1"># print(f&quot;get_layout ref_scenario={reference_scenario_name} , ms={multi_scenario_names}&quot;)</span>
        <span class="n">selected_ref_scenarios</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">multi_scenario_names</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">multi_scenario_names</span>

        <span class="c1"># Reconcile reference_scenario_name and multi_scenario_names with actual scenarios? (if in the mean time a scenario got deleted)</span>
        <span class="n">selected_ref_scenario</span> <span class="o">=</span> <span class="n">reference_scenario_name</span> <span class="k">if</span> <span class="n">reference_scenario_name</span> <span class="ow">in</span> <span class="n">scenarios_df</span><span class="o">.</span><span class="n">index</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">selected_ref_scenarios</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">selected_ref_scenarios</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">scenarios_df</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>

            <span class="n">dbc</span><span class="o">.</span><span class="n">Card</span><span class="p">([</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">CardHeader</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="s2">&quot;Reference Scenario&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s1">&#39;28vw&#39;</span><span class="p">})),</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">CardBody</span><span class="p">([</span>
                    <span class="c1"># dbc.CardHeader(html.Div(&quot;Reference Scenario&quot;, style={&#39;width&#39;: &#39;28vw&#39;})),</span>
                    <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
                        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;reference_scenario_drpdwn&#39;</span><span class="p">,</span>
                        <span class="n">options</span><span class="o">=</span><span class="p">[</span>
                            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span>
                            <span class="c1"># for i in scenarios_df.reset_index().scenario_name</span>
                            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">scenarios_df</span><span class="o">.</span><span class="n">index</span>
                        <span class="p">],</span>
                        <span class="n">value</span><span class="o">=</span><span class="n">selected_ref_scenario</span><span class="p">,</span>
                        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s1">&#39;28vw&#39;</span><span class="p">})</span>
                <span class="p">])</span>
            <span class="p">],</span> <span class="c1">#style = {&#39;width&#39;: &#39;30vw&#39;}</span>
            <span class="p">),</span>

            <span class="n">dbc</span><span class="o">.</span><span class="n">Card</span><span class="p">([</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">CardHeader</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="s2">&quot;Reference Scenarios&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s1">&#39;28vw&#39;</span><span class="p">})),</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">CardBody</span><span class="p">([</span>
                    <span class="c1"># dbc.CardHeader(html.Div(&quot;Reference Scenario&quot;, style={&#39;width&#39;: &#39;28vw&#39;})),</span>
                    <span class="n">dcc</span><span class="o">.</span><span class="n">Checklist</span><span class="p">(</span>
                        <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;reference_scenarios_checklist&#39;</span><span class="p">,</span>
                        <span class="n">options</span><span class="o">=</span><span class="p">[</span>
                            <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span>
                            <span class="c1"># for i in scenarios_df.reset_index().scenario_name</span>
                            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">scenarios_df</span><span class="o">.</span><span class="n">index</span>
                        <span class="p">],</span>
                        <span class="n">value</span><span class="o">=</span><span class="n">selected_ref_scenarios</span><span class="p">,</span>
                        <span class="n">labelStyle</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;display&#39;</span><span class="p">:</span> <span class="s1">&#39;block&#39;</span><span class="p">},</span>
                        <span class="c1"># style={&quot;overflow&quot;:&quot;auto&quot;}</span>
                        <span class="c1"># style = {&#39;width&#39;: &#39;28vw&#39;}</span>
                    <span class="p">)</span>
                <span class="p">])</span>
            <span class="p">],</span> <span class="c1">#style = {&#39;width&#39;: &#39;30vw&#39;}</span>
            <span class="p">),</span>

            <span class="n">dbc</span><span class="o">.</span><span class="n">Card</span><span class="p">([</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">CardHeader</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="s2">&quot;Scenarios&quot;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s1">&#39;80vw&#39;</span><span class="p">})),</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">CardBody</span><span class="p">(</span>
                    <span class="c1"># id=&#39;scenario_table_card&#39;,</span>
                    <span class="p">[</span>
                     <span class="c1"># html.Div(id=&quot;scenario_table_div&quot;, style={&#39;width&#39;: &#39;78vw&#39;},</span>
                     <span class="c1">#          ),</span>
                     <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_scenario_operations_table</span><span class="p">(</span><span class="n">scenarios_df</span><span class="p">)),</span>
                     <span class="p">]</span>
                <span class="p">),</span>
            <span class="p">],</span> <span class="c1"># style={&#39;width&#39;: &#39;80vw&#39;}</span>
            <span class="p">),</span>

            <span class="n">dbc</span><span class="o">.</span><span class="n">Accordion</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">dbc</span><span class="o">.</span><span class="n">AccordionItem</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">html</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="s2">&quot;Download all scenarios in a .zip archive. May take a long time.&quot;</span><span class="p">),</span>
                            <span class="n">html</span><span class="o">.</span><span class="n">Hr</span><span class="p">(),</span>
                            <span class="n">dbc</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
                                <span class="s2">&quot;Download all scenarios&quot;</span><span class="p">,</span>
                                <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;download_scenarios_button&quot;</span><span class="p">,</span>
                                <span class="n">className</span><span class="o">=</span><span class="s2">&quot;mb-3&quot;</span><span class="p">,</span>
                                <span class="n">color</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
                                <span class="n">n_clicks</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                            <span class="p">),</span>
                            <span class="n">dcc</span><span class="o">.</span><span class="n">Download</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;download_scenarios_download&#39;</span><span class="p">),</span>
                        <span class="p">],</span>
                        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Download All Scenarios&quot;</span><span class="p">,</span>
                    <span class="p">),</span>

                    <span class="n">dbc</span><span class="o">.</span><span class="n">AccordionItem</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">html</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="s2">&quot;Select or drop one or more .xlsx or one .zip (with multiple .xlsx)&quot;</span><span class="p">),</span>
                            <span class="n">html</span><span class="o">.</span><span class="n">Hr</span><span class="p">(),</span>
                            <span class="n">dcc</span><span class="o">.</span><span class="n">Upload</span><span class="p">(</span>
                                <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;upload_scenario&#39;</span><span class="p">,</span> <span class="c1"># &#39;upload-data&#39;,</span>
                                <span class="n">children</span><span class="o">=</span><span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
                                    <span class="s1">&#39;Drag and Drop or &#39;</span><span class="p">,</span>
                                    <span class="n">html</span><span class="o">.</span><span class="n">A</span><span class="p">(</span><span class="s1">&#39;Select Files&#39;</span><span class="p">)</span>
                                <span class="p">]),</span>
                                <span class="n">style</span><span class="o">=</span><span class="p">{</span>
                                    <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="s1">&#39;100%&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="s1">&#39;60px&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;lineHeight&#39;</span><span class="p">:</span> <span class="s1">&#39;60px&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;borderWidth&#39;</span><span class="p">:</span> <span class="s1">&#39;1px&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;borderStyle&#39;</span><span class="p">:</span> <span class="s1">&#39;dashed&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;borderRadius&#39;</span><span class="p">:</span> <span class="s1">&#39;5px&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;textAlign&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;margin&#39;</span><span class="p">:</span> <span class="s1">&#39;10px&#39;</span>
                                <span class="p">},</span>
                                <span class="c1"># Allow multiple files to be uploaded</span>
                                <span class="n">multiple</span><span class="o">=</span><span class="kc">True</span>
                            <span class="p">),</span>
                            <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;output_data_upload&#39;</span><span class="p">),</span>
                        <span class="p">],</span>
                        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Upload Scenarios&quot;</span><span class="p">,</span>
                    <span class="p">),</span>

                    <span class="n">dbc</span><span class="o">.</span><span class="n">AccordionItem</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">daq</span><span class="o">.</span><span class="n">StopButton</span><span class="p">(</span>
                                <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;stop_server_button&#39;</span><span class="p">,</span>
                                <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Stop the Dash server. &#39;</span>
                                      <span class="sa">f</span><span class="s1">&#39;Will release the port number </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">,</span>
                                <span class="n">n_clicks</span><span class="o">=</span><span class="mi">0</span>
                            <span class="p">),</span>
                            <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;stop_server_button_output&#39;</span><span class="p">)</span>
                        <span class="p">],</span>
                        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Stop Server&quot;</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">],</span>
                <span class="n">start_collapsed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">),</span>

            <span class="c1"># dbc.Card([</span>
            <span class="c1">#     dbc.CardBody(</span>
            <span class="c1">#         [</span>
            <span class="c1">#             dbc.Button(</span>
            <span class="c1">#                 &quot;Show &#39;Stop Server&#39; Button&quot;,</span>
            <span class="c1">#                 id=&quot;collapse_stop_server_button&quot;,</span>
            <span class="c1">#                 className=&quot;mb-3&quot;,</span>
            <span class="c1">#                 color=&quot;primary&quot;,</span>
            <span class="c1">#                 n_clicks=0,</span>
            <span class="c1">#             ),</span>
            <span class="c1">#             dbc.Collapse(</span>
            <span class="c1">#                 dbc.Card(dbc.CardBody([</span>
            <span class="c1">#                     # daq.StopButton(</span>
            <span class="c1">#                     #     id=&#39;stop_server_button&#39;,</span>
            <span class="c1">#                     #     label=f&#39;Stop the Dash server. &#39;</span>
            <span class="c1">#                     #           f&#39;Will release the port number {self.dash_app.port}.&#39;,</span>
            <span class="c1">#                     #     n_clicks=0</span>
            <span class="c1">#                     # ),</span>
            <span class="c1">#                     html.Div(id=&#39;stop_server_button_output&#39;)</span>
            <span class="c1">#                 ])),</span>
            <span class="c1">#                 id=&quot;collapse_stop_server_button_state&quot;,</span>
            <span class="c1">#                 is_open=False,</span>
            <span class="c1">#             ),</span>
            <span class="c1">#         ]</span>
            <span class="c1">#     ),</span>
            <span class="c1"># ], style={&#39;width&#39;: &#39;80vw&#39;}),</span>

        <span class="p">])</span>
        <span class="k">return</span> <span class="n">layout</span></div>

<div class="viewcode-block" id="HomePageEdit.get_scenario_operations_table"><a class="viewcode-back" href="../../../dse_do_dashboard.main_pages.html#dse_do_dashboard.main_pages.home_page_edit.HomePageEdit.get_scenario_operations_table">[docs]</a>    <span class="k">def</span> <span class="nf">get_scenario_operations_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scenarios_df</span><span class="p">,</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a layout which allows a user to select an operation on a scenario: duplicate, rename, delete&quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># for scenario_name in scenarios_df.reset_index().scenario_name:</span>
        <span class="k">for</span> <span class="n">scenario_name</span> <span class="ow">in</span> <span class="n">scenarios_df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">Card</span><span class="p">(</span><span class="n">dbc</span><span class="o">.</span><span class="n">Row</span><span class="p">([</span>
                    <span class="n">dbc</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_scenario_edit_dropdown</span><span class="p">(</span><span class="n">scenario_name</span><span class="p">,</span> <span class="n">scenarios_df</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                    <span class="n">dbc</span><span class="o">.</span><span class="n">Col</span><span class="p">(</span><span class="n">scenario_name</span><span class="p">),])),</span>
            <span class="p">)</span>
        <span class="c1"># layout.extend([</span>
        <span class="c1">#     dbc.Button(</span>
        <span class="c1">#         &quot;Download all scenarios&quot;,</span>
        <span class="c1">#         id=&quot;download_scenarios_button&quot;,</span>
        <span class="c1">#         className=&quot;mb-3&quot;,</span>
        <span class="c1">#         color=&quot;primary&quot;,</span>
        <span class="c1">#         n_clicks=0,</span>
        <span class="c1">#     ),</span>
        <span class="c1">#     dcc.Download(id=&#39;download_scenarios_download&#39;),</span>
        <span class="c1"># ]</span>
        <span class="c1"># )</span>
            <span class="c1"># break</span>
        <span class="k">return</span> <span class="n">layout</span></div>

<div class="viewcode-block" id="HomePageEdit.get_scenario_edit_dropdown"><a class="viewcode-back" href="../../../dse_do_dashboard.main_pages.html#dse_do_dashboard.main_pages.home_page_edit.HomePageEdit.get_scenario_edit_dropdown">[docs]</a>    <span class="k">def</span> <span class="nf">get_scenario_edit_dropdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">,</span> <span class="n">scenarios_df</span><span class="p">):</span>
        <span class="n">dropdown</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">DropdownMenu</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">dbc</span><span class="o">.</span><span class="n">DropdownMenuItem</span><span class="p">(</span>
                            <span class="s2">&quot;Duplicate&quot;</span><span class="p">,</span>
                            <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;duplicate_scenario_mi&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                            <span class="n">n_clicks</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">get_scenario_rename_modal_dialog</span><span class="p">(</span><span class="n">scenario_name</span><span class="p">),</span>
                        <span class="n">dbc</span><span class="o">.</span><span class="n">DropdownMenuItem</span><span class="p">(</span>
                            <span class="s2">&quot;Rename&quot;</span><span class="p">,</span>
                            <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;rename_scenario_mi&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                            <span class="n">n_clicks</span><span class="o">=</span><span class="mi">0</span>
                        <span class="p">),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">get_scenario_duplicate_modal_dialog</span><span class="p">(</span><span class="n">scenario_name</span><span class="p">,</span> <span class="n">scenarios_df</span><span class="p">),</span>
                        <span class="n">dbc</span><span class="o">.</span><span class="n">DropdownMenuItem</span><span class="p">(</span>
                            <span class="s2">&quot;Download&quot;</span><span class="p">,</span>
                            <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;download_scenario_mi&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                            <span class="n">n_clicks</span><span class="o">=</span><span class="mi">0</span>
                        <span class="p">),</span>
                        <span class="n">dcc</span><span class="o">.</span><span class="n">Download</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;download_scenario_download&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">}),</span>
                        <span class="c1"># html.A(id={&#39;type&#39;:&#39;download_scenario_link&#39;, &#39;index&#39;: scenario_name},</span>
                        <span class="c1">#        children=&#39;Download File&#39;</span>
                        <span class="c1">#        ),</span>
                        <span class="n">dbc</span><span class="o">.</span><span class="n">DropdownMenuItem</span><span class="p">(</span><span class="n">divider</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                        <span class="n">dbc</span><span class="o">.</span><span class="n">DropdownMenuItem</span><span class="p">(</span>
                            <span class="s2">&quot;Delete&quot;</span><span class="p">,</span>
                            <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;delete_scenario_mi&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                            <span class="n">n_clicks</span><span class="o">=</span><span class="mi">0</span>
                        <span class="p">),</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">get_scenario_delete_modal_dialog</span><span class="p">(</span><span class="n">scenario_name</span><span class="p">),</span>
                    <span class="p">],</span>
                    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">,</span>
                    <span class="n">size</span><span class="o">=</span><span class="s2">&quot;sm&quot;</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="c1"># html.P(id=&quot;item_clicks&quot;, className=&quot;mt-3&quot;),</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">dropdown</span></div>

<div class="viewcode-block" id="HomePageEdit.get_scenario_rename_modal_dialog"><a class="viewcode-back" href="../../../dse_do_dashboard.main_pages.html#dse_do_dashboard.main_pages.home_page_edit.HomePageEdit.get_scenario_rename_modal_dialog">[docs]</a>    <span class="k">def</span> <span class="nf">get_scenario_rename_modal_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">modal</span> <span class="o">=</span> <span class="n">dbc</span><span class="o">.</span><span class="n">Modal</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">dbc</span><span class="o">.</span><span class="n">ModalHeader</span><span class="p">(</span><span class="s2">&quot;Rename Scenario&quot;</span><span class="p">),</span>
                        <span class="n">dbc</span><span class="o">.</span><span class="n">ModalBody</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;New scenario name for &#39;</span><span class="si">{</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">),</span>
                        <span class="n">dbc</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span>
                            <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;rename_scenario_modal_input&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                            <span class="n">value</span><span class="o">=</span><span class="n">scenario_name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">),</span>
                        <span class="n">dbc</span><span class="o">.</span><span class="n">ModalFooter</span><span class="p">([</span>
                            <span class="n">dbc</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">,</span>
                                       <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;rename_scenario_modal_cancel&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                                       <span class="n">className</span><span class="o">=</span><span class="s2">&quot;ml-auto&quot;</span><span class="p">),</span>
                            <span class="n">dbc</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Rename&quot;</span><span class="p">,</span>
                                       <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;rename_scenario_modal_rename&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                                       <span class="n">className</span><span class="o">=</span><span class="s2">&quot;ml-auto&quot;</span><span class="p">),</span>
                        <span class="p">]),</span>
                    <span class="p">],</span>
                    <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;rename_scenario_modal&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">modal</span></div>

<div class="viewcode-block" id="HomePageEdit.get_scenario_duplicate_modal_dialog"><a class="viewcode-back" href="../../../dse_do_dashboard.main_pages.html#dse_do_dashboard.main_pages.home_page_edit.HomePageEdit.get_scenario_duplicate_modal_dialog">[docs]</a>    <span class="k">def</span> <span class="nf">get_scenario_duplicate_modal_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">scenarios_df</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">new_scenario_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">dbm</span><span class="o">.</span><span class="n">_find_free_duplicate_scenario_name</span><span class="p">(</span><span class="n">scenario_name</span><span class="p">,</span> <span class="n">scenarios_df</span><span class="p">)</span>
        <span class="n">modal</span> <span class="o">=</span> <span class="n">dbc</span><span class="o">.</span><span class="n">Modal</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">ModalHeader</span><span class="p">(</span><span class="s2">&quot;Duplicate Scenario&quot;</span><span class="p">),</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">ModalBody</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Name for the duplicate of the scenario &#39;</span><span class="si">{</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">&#39;:&quot;</span><span class="p">),</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span>
                    <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;duplicate_scenario_modal_input&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                    <span class="n">value</span><span class="o">=</span><span class="n">new_scenario_name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">),</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">ModalFooter</span><span class="p">([</span>
                    <span class="n">dbc</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">,</span>
                               <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;duplicate_scenario_modal_cancel&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                               <span class="n">className</span><span class="o">=</span><span class="s2">&quot;ml-auto&quot;</span><span class="p">),</span>
                    <span class="n">dbc</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Duplicate&quot;</span><span class="p">,</span>
                               <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;duplicate_scenario_modal_rename&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                               <span class="n">className</span><span class="o">=</span><span class="s2">&quot;ml-auto&quot;</span><span class="p">),</span>
                <span class="p">]),</span>
            <span class="p">],</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;duplicate_scenario_modal&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">modal</span></div>

<div class="viewcode-block" id="HomePageEdit.get_scenario_delete_modal_dialog"><a class="viewcode-back" href="../../../dse_do_dashboard.main_pages.html#dse_do_dashboard.main_pages.home_page_edit.HomePageEdit.get_scenario_delete_modal_dialog">[docs]</a>    <span class="k">def</span> <span class="nf">get_scenario_delete_modal_dialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scenario_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">modal</span> <span class="o">=</span> <span class="n">dbc</span><span class="o">.</span><span class="n">Modal</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">ModalHeader</span><span class="p">(</span><span class="s2">&quot;Delete Scenario&quot;</span><span class="p">),</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">ModalBody</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Delete the scenario &#39;</span><span class="si">{</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">&#39;:&quot;</span><span class="p">),</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">ModalFooter</span><span class="p">([</span>
                    <span class="n">dbc</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">,</span>
                               <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;delete_scenario_modal_cancel&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                               <span class="n">className</span><span class="o">=</span><span class="s2">&quot;ml-auto&quot;</span><span class="p">),</span>
                    <span class="n">dbc</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s2">&quot;Delete&quot;</span><span class="p">,</span>
                               <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;delete_scenario_modal_rename&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
                               <span class="n">className</span><span class="o">=</span><span class="s2">&quot;ml-auto&quot;</span><span class="p">),</span>
                <span class="p">]),</span>
            <span class="p">],</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;delete_scenario_modal&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">scenario_name</span><span class="p">},</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">modal</span></div>

<div class="viewcode-block" id="HomePageEdit.parse_scenario_upload_contents_callback"><a class="viewcode-back" href="../../../dse_do_dashboard.main_pages.html#dse_do_dashboard.main_pages.home_page_edit.HomePageEdit.parse_scenario_upload_contents_callback">[docs]</a>    <span class="k">def</span> <span class="nf">parse_scenario_upload_contents_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contents</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called for each uploaded scenario&quot;&quot;&quot;</span>
        <span class="n">content_type</span><span class="p">,</span> <span class="n">content_string</span> <span class="o">=</span> <span class="n">contents</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Upload file. filename=</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">, content_type=</span><span class="si">{</span><span class="n">content_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">decoded</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">content_string</span><span class="p">)</span>
        <span class="c1"># root, file_extension = os.path.splitext(filename)</span>
        <span class="n">file_extension</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">suffix</span>
        <span class="n">scenario_name</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;scenario_name = </span><span class="si">{</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">, extension = </span><span class="si">{</span><span class="n">file_extension</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">file_extension</span> <span class="o">==</span> <span class="s1">&#39;.xlsx&#39;</span><span class="p">:</span>
                <span class="c1"># pass</span>
                <span class="c1"># Assume that the user uploaded an excel file</span>
                <span class="c1"># df = pd.read_excel(io.BytesIO(decoded))</span>
                <span class="n">xl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">decoded</span><span class="p">))</span>
                <span class="c1"># Read data from Excel</span>
                <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span> <span class="o">=</span> <span class="n">ScenarioManager</span><span class="o">.</span><span class="n">load_data_from_excel_s</span><span class="p">(</span><span class="n">xl</span><span class="p">)</span>
                <span class="c1"># s = f&quot;inputs = {inputs.keys()}, outputs = {outputs.keys()}&quot;</span>
                <span class="c1"># print(s)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Input tables: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Output tables: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">dbm</span><span class="o">.</span><span class="n">replace_scenario_in_db</span><span class="p">(</span><span class="n">scenario_name</span><span class="o">=</span><span class="n">scenario_name</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">)</span>
                <span class="n">child</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
                    <span class="n">html</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Uploaded scenario: &#39;</span><span class="si">{</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">&#39; from &#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">),</span>
                    <span class="n">html</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Input tables: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
                    <span class="n">html</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Output tables: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
                <span class="p">])</span>
                <span class="k">return</span> <span class="n">child</span>
            <span class="k">elif</span> <span class="n">file_extension</span> <span class="o">==</span> <span class="s1">&#39;.zip&#39;</span><span class="p">:</span>
                <span class="n">zip_file</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">decoded</span><span class="p">))</span>
                <span class="c1"># unzip_results = [html.P(f&quot;Support for zip archives (of .xslx) is pending: {filename}&quot;)]</span>
                <span class="n">unzip_results</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">zip_file</span><span class="o">.</span><span class="n">infolist</span><span class="p">():</span>
                    <span class="n">scenario_name</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span>
                    <span class="n">file_extension</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">suffix</span>
                    <span class="k">if</span> <span class="n">file_extension</span> <span class="o">==</span> <span class="s1">&#39;.xlsx&#39;</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;file in zip : </span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">filecontents</span> <span class="o">=</span> <span class="n">zip_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
                        <span class="n">xl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="n">filecontents</span><span class="p">)</span>
                        <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span> <span class="o">=</span> <span class="n">ScenarioManager</span><span class="o">.</span><span class="n">load_data_from_excel_s</span><span class="p">(</span><span class="n">xl</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Input tables: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Output tables: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">dbm</span><span class="o">.</span><span class="n">replace_scenario_in_db</span><span class="p">(</span><span class="n">scenario_name</span><span class="o">=</span><span class="n">scenario_name</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">)</span>  <span class="c1">#</span>
                        <span class="n">unzip_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Uploaded scenario: &#39;</span><span class="si">{</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">&#39; from &#39;</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">),)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">unzip_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File: &#39;</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39; is not a .xlsx. Skipped.&quot;</span><span class="p">),)</span>
                <span class="n">child</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="n">unzip_results</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">child</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported file type: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
                <span class="sa">f</span><span class="s1">&#39;There was an error processing this file: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="p">])</span>

        <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Uploaded scenario </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="HomePageEdit.set_dash_callbacks"><a class="viewcode-back" href="../../../dse_do_dashboard.main_pages.html#dse_do_dashboard.main_pages.home_page_edit.HomePageEdit.set_dash_callbacks">[docs]</a>    <span class="k">def</span> <span class="nf">set_dash_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">app</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">app</span>

        <span class="c1">#############################################################################</span>
        <span class="c1"># Scenario operations callbacks</span>
        <span class="c1">#############################################################################</span>
        <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span><span class="n">Output</span><span class="p">(</span><span class="s1">&#39;output_data_upload&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>
                      <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;upload_scenario&#39;</span><span class="p">,</span> <span class="s1">&#39;contents&#39;</span><span class="p">),</span>
                      <span class="n">State</span><span class="p">(</span><span class="s1">&#39;upload_scenario&#39;</span><span class="p">,</span> <span class="s1">&#39;filename&#39;</span><span class="p">),</span>
                      <span class="n">State</span><span class="p">(</span><span class="s1">&#39;upload_scenario&#39;</span><span class="p">,</span> <span class="s1">&#39;last_modified&#39;</span><span class="p">))</span>
        <span class="k">def</span> <span class="nf">update_output</span><span class="p">(</span><span class="n">list_of_contents</span><span class="p">,</span> <span class="n">list_of_names</span><span class="p">,</span> <span class="n">list_of_dates</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Supports uploading a set of scenarios&quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="n">list_of_contents</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="c1"># f&quot;{n}, {d}&quot; for c, n, d in zip(list_of_contents, list_of_names, list_of_dates)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parse_scenario_upload_contents_callback</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">list_of_contents</span><span class="p">,</span> <span class="n">list_of_names</span><span class="p">,</span> <span class="n">list_of_dates</span><span class="p">)</span>
                <span class="p">]</span>
                <span class="k">return</span> <span class="n">children</span>


        <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">([</span>
            <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;download_scenarios_button&#39;</span><span class="p">,</span> <span class="s1">&#39;n_clicks&#39;</span><span class="p">),</span>
            <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;download_scenarios_download&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">),</span>
            <span class="p">],</span>
            <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;download_scenarios_button&#39;</span><span class="p">,</span> <span class="s1">&#39;n_clicks&#39;</span><span class="p">),</span>
            <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="k">def</span> <span class="nf">download_scenarios_callback</span><span class="p">(</span><span class="n">n_clicks</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Download all scenarios in a zip file.</span>
<span class="sd">            TODO: download selected set of scenarios</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Download all scenarios&quot;</span><span class="p">)</span>
            <span class="n">scenarios_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">read_scenarios_table_from_db_cached</span><span class="p">()</span>
            <span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
                <span class="n">zip_filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s1">&#39;scenarios.zip&#39;</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">zip_filepath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">zipMe</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">scenario_name</span> <span class="ow">in</span> <span class="n">scenarios_df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Download scenario </span><span class="si">{</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">dbm</span><span class="o">.</span><span class="n">read_scenario_from_db</span><span class="p">(</span><span class="n">scenario_name</span><span class="p">)</span>
                        <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">scenario_name</span><span class="si">}</span><span class="s1">.xlsx&#39;</span>
                        <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
                        <span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelWriter</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
                            <span class="n">ScenarioManager</span><span class="o">.</span><span class="n">write_data_to_excel_s</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">)</span>
                            <span class="n">writer</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                            <span class="n">zipMe</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">arcname</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">compress_type</span><span class="o">=</span><span class="n">zipfile</span><span class="o">.</span><span class="n">ZIP_DEFLATED</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">dcc</span><span class="o">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">zip_filepath</span><span class="p">)</span>

            <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="n">data</span>

        <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">([</span>
            <span class="n">Output</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;download_scenario_mi&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s1">&#39;n_clicks&#39;</span><span class="p">),</span>
            <span class="n">Output</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;download_scenario_download&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s1">&#39;data&#39;</span><span class="p">),</span>
            <span class="p">],</span>
            <span class="n">Input</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;download_scenario_mi&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s1">&#39;n_clicks&#39;</span><span class="p">),</span>
            <span class="n">State</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;download_scenario_mi&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s1">&#39;id&#39;</span><span class="p">),</span>
            <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
        <span class="k">def</span> <span class="nf">download_scenario_callback</span><span class="p">(</span><span class="n">n_clicks</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;We need the `n_clicks` as input. Only the `id` will not be triggered when a user selects the menu option.</span>
<span class="sd">            See https://community.plotly.com/t/excel-writer-to-dcc-download/54132/5 for use of tempfile.TemporaryDirectory()</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">scenario_name</span> <span class="o">=</span> <span class="nb">id</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Download scenario </span><span class="si">{</span><span class="n">scenario_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="c1"># df = pd.DataFrame({&#39;dropdown_value&#39;: [1, 2, 3]})</span>
            <span class="c1"># relative_filename = os.path.join(</span>
            <span class="c1">#     &#39;downloads&#39;,</span>
            <span class="c1">#     &#39;{}-download.xlsx&#39;.format(scenario_name)</span>
            <span class="c1"># )</span>
            <span class="c1"># absolute_filename = os.path.join(os.getcwd(), relative_filename)</span>
            <span class="c1"># writer = pd.ExcelWriter(absolute_filename)</span>
            <span class="c1"># df.to_excel(writer, &#39;Sheet1&#39;)</span>
            <span class="c1"># writer.save()</span>
            <span class="c1"># href = &#39;./{}&#39;.format(relative_filename)</span>

            <span class="n">multi_threaded</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Enabling multi-threading does NOT result in speedup. In fact for small scenarios it is slower!</span>
            <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">dbm</span><span class="o">.</span><span class="n">read_scenario_from_db</span><span class="p">(</span><span class="n">scenario_name</span><span class="p">,</span> <span class="n">multi_threaded</span><span class="p">)</span>
            <span class="c1">#TODO: inputs include a scenario table. Remove.</span>

            <span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">scenario_name</span><span class="si">}</span><span class="s1">.xlsx&#39;</span>
                <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelWriter</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
                    <span class="n">ScenarioManager</span><span class="o">.</span><span class="n">write_data_to_excel_s</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">)</span>
                    <span class="n">writer</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">dcc</span><span class="o">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>

            <span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="n">data</span>

        <span class="c1"># @app.server.route(&#39;/downloads/&lt;path:path&gt;&#39;)</span>
        <span class="c1"># def serve_static(path):</span>
        <span class="c1">#     root_dir = os.getcwd()</span>
        <span class="c1">#     return flask.send_from_directory(</span>
        <span class="c1">#         os.path.join(root_dir, &#39;downloads&#39;), path</span>
        <span class="c1">#     )</span>

        <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
            <span class="n">Output</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;delete_scenario_modal&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;is_open&quot;</span><span class="p">),</span>
            <span class="p">[</span>
                <span class="n">Input</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;delete_scenario_mi&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s1">&#39;n_clicks&#39;</span><span class="p">),</span>
                <span class="n">Input</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;delete_scenario_modal_cancel&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">),</span>
                <span class="n">Input</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;delete_scenario_modal_rename&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">),</span>
            <span class="p">],</span>
            <span class="p">[</span><span class="n">State</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;delete_scenario_modal&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;is_open&quot;</span><span class="p">),</span>
             <span class="c1"># State({&#39;type&#39;: &#39;delete_scenario_modal_input&#39;, &#39;index&#39;: MATCH}, &quot;value&quot;)</span>
             <span class="p">],</span>
        <span class="p">)</span>
        <span class="k">def</span> <span class="nf">toggle_delete_modal</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">is_open</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">ctx</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">callback_context</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ctx</span><span class="o">.</span><span class="n">triggered</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">PreventUpdate</span>

            <span class="k">if</span> <span class="n">n1</span> <span class="ow">or</span> <span class="n">n2</span> <span class="ow">or</span> <span class="n">n3</span><span class="p">:</span>
                <span class="c1"># print(f&quot;Rename modal: {new_scenario_name}&quot;)</span>
                <span class="c1"># print(f&quot;ctx.triggered[0] = {ctx.triggered[0]}&quot;)</span>
                <span class="n">triggered_component_id_str</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">triggered</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;prop_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># This returns a STRING representation of the pattern-matching id</span>
                <span class="c1"># print(f&quot;Rename context id = {triggered_component_id}&quot;)</span>
                <span class="n">triggered_component_id_dict</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">triggered_component_id_str</span><span class="p">)</span>  <span class="c1"># Convert the string to a Dict to get the type.</span>
                <span class="n">ctx_type</span> <span class="o">=</span> <span class="n">triggered_component_id_dict</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
                <span class="n">current_scenario_name</span> <span class="o">=</span> <span class="n">triggered_component_id_dict</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span>
                <span class="c1"># print(f&quot;Rename context type = {ctx_type}&quot;)</span>

                <span class="k">if</span> <span class="n">ctx_type</span> <span class="o">==</span> <span class="s1">&#39;delete_scenario_modal_rename&#39;</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting scenario from </span><span class="si">{</span><span class="n">current_scenario_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">dbm</span><span class="o">.</span><span class="n">delete_scenario_from_db</span><span class="p">(</span><span class="n">current_scenario_name</span><span class="p">)</span>

                <span class="k">return</span> <span class="ow">not</span> <span class="n">is_open</span>
            <span class="k">return</span> <span class="n">is_open</span>

        <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
            <span class="n">Output</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;duplicate_scenario_modal&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;is_open&quot;</span><span class="p">),</span>
            <span class="p">[</span>
                <span class="n">Input</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;duplicate_scenario_mi&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s1">&#39;n_clicks&#39;</span><span class="p">),</span>
                <span class="n">Input</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;duplicate_scenario_modal_cancel&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">),</span>
                <span class="n">Input</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;duplicate_scenario_modal_rename&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">),</span>
            <span class="p">],</span>
            <span class="p">[</span><span class="n">State</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;duplicate_scenario_modal&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;is_open&quot;</span><span class="p">),</span>
             <span class="n">State</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;duplicate_scenario_modal_input&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
             <span class="p">],</span>
        <span class="p">)</span>
        <span class="k">def</span> <span class="nf">toggle_duplicate_modal</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">is_open</span><span class="p">,</span> <span class="n">new_scenario_name</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            TODO: replace by a duplicate + delete</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">ctx</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">callback_context</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ctx</span><span class="o">.</span><span class="n">triggered</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">PreventUpdate</span>

            <span class="k">if</span> <span class="n">n1</span> <span class="ow">or</span> <span class="n">n2</span> <span class="ow">or</span> <span class="n">n3</span><span class="p">:</span>
                <span class="c1"># print(f&quot;Rename modal: {new_scenario_name}&quot;)</span>
                <span class="c1"># print(f&quot;ctx.triggered[0] = {ctx.triggered[0]}&quot;)</span>
                <span class="n">triggered_component_id_str</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">triggered</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;prop_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># This returns a STRING representation of the pattern-matching id</span>
                <span class="c1"># print(f&quot;Rename context id = {triggered_component_id}&quot;)</span>
                <span class="n">triggered_component_id_dict</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">triggered_component_id_str</span><span class="p">)</span>  <span class="c1"># Convert the string to a Dict to get the type.</span>
                <span class="n">ctx_type</span> <span class="o">=</span> <span class="n">triggered_component_id_dict</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
                <span class="n">current_scenario_name</span> <span class="o">=</span> <span class="n">triggered_component_id_dict</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span>
                <span class="c1"># print(f&quot;Rename context type = {ctx_type}&quot;)</span>

                <span class="k">if</span> <span class="n">ctx_type</span> <span class="o">==</span> <span class="s1">&#39;duplicate_scenario_modal_rename&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">new_scenario_name</span> <span class="o">!=</span> <span class="n">current_scenario_name</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Duplicating scenario from </span><span class="si">{</span><span class="n">current_scenario_name</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">new_scenario_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">dbm</span><span class="o">.</span><span class="n">duplicate_scenario_in_db</span><span class="p">(</span><span class="n">current_scenario_name</span><span class="p">,</span> <span class="n">new_scenario_name</span><span class="p">)</span>

                <span class="k">return</span> <span class="ow">not</span> <span class="n">is_open</span>
            <span class="k">return</span> <span class="n">is_open</span>

        <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
            <span class="n">Output</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;rename_scenario_modal&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;is_open&quot;</span><span class="p">),</span>
            <span class="p">[</span>
             <span class="n">Input</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;rename_scenario_mi&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s1">&#39;n_clicks&#39;</span><span class="p">),</span>
             <span class="n">Input</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;rename_scenario_modal_cancel&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">),</span>
             <span class="n">Input</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;rename_scenario_modal_rename&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">),</span>
             <span class="p">],</span>
            <span class="p">[</span><span class="n">State</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;rename_scenario_modal&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;is_open&quot;</span><span class="p">),</span>
             <span class="n">State</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;rename_scenario_modal_input&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="n">MATCH</span><span class="p">},</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
             <span class="p">],</span>
                <span class="p">)</span>
        <span class="k">def</span> <span class="nf">toggle_rename_modal</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">is_open</span><span class="p">,</span> <span class="n">new_scenario_name</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            TODO: trigger reload of scenario table and update of UI</span>
<span class="sd">            If `rename_scenario_modal_rename` then do the rename</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">ctx</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">callback_context</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ctx</span><span class="o">.</span><span class="n">triggered</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">PreventUpdate</span>

            <span class="k">if</span> <span class="n">n1</span> <span class="ow">or</span> <span class="n">n2</span> <span class="ow">or</span> <span class="n">n3</span><span class="p">:</span>
                <span class="c1"># print(f&quot;Rename modal: {new_scenario_name}&quot;)</span>
                <span class="c1"># print(f&quot;ctx.triggered[0] = {ctx.triggered[0]}&quot;)</span>
                <span class="n">triggered_component_id_str</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">triggered</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;prop_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># This returns a STRING representation of the pattern-matching id</span>
                <span class="c1"># print(f&quot;Rename context id = {triggered_component_id}&quot;)</span>
                <span class="n">triggered_component_id_dict</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="n">triggered_component_id_str</span><span class="p">)</span>  <span class="c1"># Convert the string to a Dict to get the type.</span>
                <span class="n">ctx_type</span> <span class="o">=</span> <span class="n">triggered_component_id_dict</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
                <span class="n">current_scenario_name</span> <span class="o">=</span> <span class="n">triggered_component_id_dict</span><span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">]</span>
                <span class="c1"># print(f&quot;Rename context type = {ctx_type}&quot;)</span>

                <span class="k">if</span> <span class="n">ctx_type</span> <span class="o">==</span> <span class="s1">&#39;rename_scenario_modal_rename&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">new_scenario_name</span> <span class="o">!=</span> <span class="n">current_scenario_name</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Renaming scenario from </span><span class="si">{</span><span class="n">current_scenario_name</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">new_scenario_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">dbm</span><span class="o">.</span><span class="n">rename_scenario_in_db</span><span class="p">(</span><span class="n">current_scenario_name</span><span class="p">,</span> <span class="n">new_scenario_name</span><span class="p">)</span>

                <span class="k">return</span> <span class="ow">not</span> <span class="n">is_open</span>
            <span class="k">return</span> <span class="n">is_open</span>

        <span class="c1"># @app.callback(</span>
        <span class="c1">#     Output({&#39;type&#39;: &#39;duplicate_scenario_mi&#39;, &#39;index&#39;: MATCH}, &#39;n_clicks&#39;),</span>
        <span class="c1">#     Input({&#39;type&#39;: &#39;duplicate_scenario_mi&#39;, &#39;index&#39;: MATCH}, &#39;n_clicks&#39;),</span>
        <span class="c1">#     State({&#39;type&#39;: &#39;duplicate_scenario_mi&#39;, &#39;index&#39;: MATCH}, &#39;id&#39;),</span>
        <span class="c1">#     prevent_initial_call=True</span>
        <span class="c1"># )</span>
        <span class="c1"># def duplicate_scenario_callback(n_clicks, id):</span>
        <span class="c1">#     &quot;&quot;&quot;We need the `n_clicks` as input. Only the `id` will not be triggered when a user selects the menu option.&quot;&quot;&quot;</span>
        <span class="c1">#     scenario_name = id[&#39;index&#39;]</span>
        <span class="c1">#     print(f&quot;Duplicate scenario {scenario_name}&quot;)</span>
        <span class="c1">#     raise PreventUpdate</span>
        <span class="c1">#     return 0</span>
        <span class="c1">#</span>
        <span class="c1"># @app.callback(</span>
        <span class="c1">#     Output({&#39;type&#39;: &#39;rename_scenario_mi&#39;, &#39;index&#39;: MATCH}, &#39;n_clicks&#39;),</span>
        <span class="c1">#     Input({&#39;type&#39;: &#39;rename_scenario_mi&#39;, &#39;index&#39;: MATCH}, &#39;n_clicks&#39;),</span>
        <span class="c1">#     State({&#39;type&#39;: &#39;rename_scenario_mi&#39;, &#39;index&#39;: MATCH}, &#39;id&#39;),</span>
        <span class="c1">#     prevent_initial_call=True</span>
        <span class="c1"># )</span>
        <span class="c1"># def rename_scenario_callback(n_clicks, id):</span>
        <span class="c1">#     &quot;&quot;&quot;We need the `n_clicks` as input. Only the `id` will not be triggered when a user selects the menu option.&quot;&quot;&quot;</span>
        <span class="c1">#     scenario_name = id[&#39;index&#39;]</span>
        <span class="c1">#     print(f&quot;Rename scenario {scenario_name}&quot;)</span>
        <span class="c1">#     raise PreventUpdate</span>
        <span class="c1">#     return 0</span>
        <span class="c1">#</span>
        <span class="c1"># @app.callback(</span>
        <span class="c1">#     Output({&#39;type&#39;: &#39;delete_scenario_mi&#39;, &#39;index&#39;: MATCH}, &#39;n_clicks&#39;),</span>
        <span class="c1">#     Input({&#39;type&#39;: &#39;delete_scenario_mi&#39;, &#39;index&#39;: MATCH}, &#39;n_clicks&#39;),</span>
        <span class="c1">#     State({&#39;type&#39;: &#39;delete_scenario_mi&#39;, &#39;index&#39;: MATCH}, &#39;id&#39;),</span>
        <span class="c1">#     prevent_initial_call=True</span>
        <span class="c1"># )</span>
        <span class="c1"># def delete_scenario_callback(n_clicks, id):</span>
        <span class="c1">#     &quot;&quot;&quot;We need the `n_clicks` as input. Only the `id` will not be triggered when a user selects the menu option.&quot;&quot;&quot;</span>
        <span class="c1">#     scenario_name = id[&#39;index&#39;]</span>
        <span class="c1">#     print(f&quot;Delete scenario {scenario_name}&quot;)</span>
        <span class="c1">#     raise PreventUpdate</span>
        <span class="c1">#     return 0</span>

        <span class="c1">#############################################################################</span>
        <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
            <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;collapse_stop_server_button_state&quot;</span><span class="p">,</span> <span class="s2">&quot;is_open&quot;</span><span class="p">),</span>
            <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s2">&quot;collapse_stop_server_button&quot;</span><span class="p">,</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">)],</span>
            <span class="p">[</span><span class="n">State</span><span class="p">(</span><span class="s2">&quot;collapse_stop_server_button_state&quot;</span><span class="p">,</span> <span class="s2">&quot;is_open&quot;</span><span class="p">)],</span>
        <span class="p">)</span>
        <span class="k">def</span> <span class="nf">toggle_collapse</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">is_open</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">n</span><span class="p">:</span>
                <span class="k">return</span> <span class="ow">not</span> <span class="n">is_open</span>
            <span class="k">return</span> <span class="n">is_open</span>

        <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
            <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;stop_server_button_output&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>
            <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;stop_server_button&#39;</span><span class="p">,</span> <span class="s1">&#39;n_clicks&#39;</span><span class="p">),</span>
            <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="k">def</span> <span class="nf">update_output</span><span class="p">(</span><span class="n">n_clicks</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dash_app</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
            <span class="k">return</span> <span class="s1">&#39;The stop button has been clicked </span><span class="si">{}</span><span class="s1"> times.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n_clicks</span><span class="p">)</span>

        <span class="c1">##############################################################################</span>
        <span class="c1">#  Select Reference Scenarios</span>
        <span class="c1">##############################################################################</span>
        <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
            <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;reference_scenario_name_store&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">),</span>
            <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;reference_scenario_drpdwn&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">def</span> <span class="nf">store_reference_scenario</span><span class="p">(</span><span class="n">reference_scenario_name</span><span class="p">):</span>
            <span class="c1"># print(f&quot;Selected ref scenario = {reference_scenario_name}&quot;)</span>
            <span class="k">return</span> <span class="n">reference_scenario_name</span>

        <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
            <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;multi_scenario_names_store&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">),</span>
            <span class="n">Input</span><span class="p">(</span><span class="s1">&#39;reference_scenarios_checklist&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">def</span> <span class="nf">store_multi_scenario_names</span><span class="p">(</span><span class="n">multi_scenario_names</span><span class="p">):</span>
            <span class="c1"># print(f&quot;Multi scenario names = {multi_scenario_names}&quot;)</span>
            <span class="k">return</span> <span class="n">multi_scenario_names</span></div></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">DSE DO Dashboard 0.1.2.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">dse_do_dashboard.main_pages.home_page_edit</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Victor Terpstra &lt;vterpstra@us.ibm.com&gt;.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
    </div>
  </body>
</html>